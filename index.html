<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Envelope + Letter (Open/Close on Click)</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="container">
        <div class="envelope-wrapper">
            <div class="envelope">
                <div class="letter">
                    <div class="text">
                        <strong>THÆ¯ Má»œI Tá»T NGHIá»†P ğŸ’Œ.</strong>
                        <p class="intro-text">
                           Sau bao ngÃ y cá»‘ gáº¯ng, cuá»‘i cÃ¹ng ThÆ° cÅ©ng sáº¯p khÃ©p láº¡i má»™t hÃ nh trÃ¬nh Ä‘á»ƒ bÆ°á»›c sang cháº·ng Ä‘Æ°á»ng má»›i ğŸ“.<br>
                           VÃ  ngÃ y nÃ y sáº½ trá»Ÿ nÃªn trá»n váº¹n hÆ¡n ráº¥t nhiá»u náº¿u cÃ³ sá»± hiá»‡n diá»‡n cá»§a má»i ngÆ°á»i.<br>
                           ThÆ° tháº­t lÃ²ng mong má»i ngÆ°á»i sáº½ Ä‘áº¿n Ä‘á»ƒ chia sáº» niá»m vui vÃ  cÃ¹ng ThÆ° lÆ°u giá»¯ tháº­t nhiá»u khoáº£nh kháº¯c Ã½ nghÄ©a.<br>
                           Háº¹n gáº·p má»i ngÆ°á»i nhe ğŸ˜‰
                        </p>
                        <p><b>â° Thá»i gian:</b> 15h30 - 17h30 NgÃ y 14/09/2025</p>
                        <p><b>ğŸ“ Äá»‹a Ä‘iá»ƒm:</b> Äáº¡i há»c Ngoáº¡i ThÆ°Æ¡ng (91 ChÃ¹a LÃ¡ng, P. LÃ¡ng ThÆ°á»£ng, Q. Äá»‘ng Äa)</p>
                        <p><b>ğŸ“ LiÃªn há»‡:</b> 0886898567 (Minh ThÆ°)</p>
                        <div class="map-btn-wrapper">
                           <span class="map-icon">ğŸ‘‰</span>
                           <a href="#" class="map-btn"> ğŸ—ºï¸FTU GUIDE MAP</a>
                           <span class="map-icon">ğŸ‘ˆ</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="heart"></div>
        </div>
    </div>
    <audio id="bg-music" src="music.mp3"></audio>
    <canvas id="confetti"></canvas>
    <div id="map-overlay" class="map-overlay">
      <span class="close-btn">&times;</span>
      <img src="map.jpg" alt="ğŸ—ºï¸FTU GUIDE MAP" class="map-img">
    </div>
   <script>
        const envelopeWrapper = document.querySelector('.envelope-wrapper');
        const heart = document.querySelector('.heart');
        const music = document.getElementById('bg-music');

        heart.addEventListener('click', () => {
          envelopeWrapper.classList.toggle('flap');

          if (envelopeWrapper.classList.contains('flap')) {
            music.play();
          } else {
            music.pause();
            music.currentTime = 0;
          } 
        });
        const mapBtn = document.querySelector('.map-btn');
        const mapOverlay = document.getElementById('map-overlay');
        const closeBtn = document.querySelector('.close-btn');

        mapBtn.addEventListener('click', (e) => {
          e.preventDefault();
          mapOverlay.style.display = "flex";
          });

        closeBtn.addEventListener('click', () => {
          mapOverlay.style.display = 'none';
        });

        mapOverlay.addEventListener('click', (e) => {
          if (e.target === mapOverlay) {
            mapOverlay.style.display = "none";
          }
        });
const confettiCanvas = document.getElementById('confetti');
  const ctx = confettiCanvas.getContext('2d');
  confettiCanvas.width = window.innerWidth;
  confettiCanvas.height = window.innerHeight;

  let confettis = [];

  function randomColor() {
    const colors = ['#ff9999', '#ffcc99', '#ffff99', '#ccff99', '#99ccff', '#ffb3e6'];
    return colors[Math.floor(Math.random() * colors.length)];
  }

  function createConfetti() {
  const fromLeft = Math.random() < 0.5;
  return {
    x: fromLeft ? 0 : confettiCanvas.width,  
    y: confettiCanvas.height,                
    w: 8,
    h: 14,
    color: randomColor(),
    speedX: fromLeft ? (Math.random() * 3 + 2) : -(Math.random() * 3 + 2), 
    speedY: -(Math.random() * 5 + 4),  
    angle: Math.random() * 360
  };
  }

  function drawConfetti() {
    ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
    confettis.forEach((c, i) => {
      ctx.fillStyle = c.color;
      ctx.save();
      ctx.translate(c.x, c.y);
      ctx.rotate(c.angle * Math.PI / 180);
      ctx.fillRect(-c.w/2, -c.h/2, c.w, c.h);
      ctx.restore();

      c.x += c.speedX;
      c.y += c.speedY;
      c.speedY += 0.1; 
      c.angle += 5;

      if (c.y > confettiCanvas.height + 20) {
        confettis.splice(i, 1);
      }
    });
    requestAnimationFrame(drawConfetti);
  }

  function startConfetti() {
    confettis = [];
    for (let i = 0; i < 150; i++) {
      confettis.push(createConfetti());
    }
    drawConfetti();

    setTimeout(() => { confettis = []; }, 5000);
  }

  heart.addEventListener('click', () => {
    if (envelopeWrapper.classList.contains('flap')) {
      startConfetti();
    }
  });
  </script>
</body>
</html>